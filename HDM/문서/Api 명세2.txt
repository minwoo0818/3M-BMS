ì§€ê¸ˆê¹Œì§€ í”„ë¡ íŠ¸ì—”ë“œ í™”ë©´ì„ êµ¬í˜„í•˜ë©´ì„œ êµ¬ì²´í™”ëœ ë°ì´í„° êµ¬ì¡°(ì»¬ëŸ¼, í•„í„°, ì°¨íŠ¸ ë°ì´í„° ë“±)ë¥¼ ëª¨ë‘ ë°˜ì˜í•˜ì—¬ \*\*ìµœì‹ í™”ëœ API ëª…ì„¸ì„œ (v2)\*\*ë¥¼ ì‘ì„±í•´ ë“œë¦½ë‹ˆë‹¤.

ìš”ì²­í•˜ì‹  ëŒ€ë¡œ `/api` ì ‘ë‘ì–´ëŠ” ì œê±°í•˜ê³ , **Request/Response Body**ë¥¼ ì‹¤ì œ ê°œë°œì— ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

-----

# âœ… **í˜„ëŒ€ì •ë°€ - API ëª…ì„¸ì„œ (v2.0)**

**ê³µí†µ ì‚¬í•­**

  * **Base URL:** `http://api.server.com` (ë˜ëŠ” ë¡œì»¬ `http://localhost:8080`)
  * **ì¸ì¦ ë°©ì‹:** Headerì— `Authorization: Bearer <token>` í¬í•¨
  * **ì‘ë‹µ í˜•ì‹:** JSON
  * **ë‚ ì§œ í˜•ì‹:** `YYYY-MM-DD` (String)

-----

# ğŸ“Œ **1. ì¸ì¦ / ê³„ì • (Auth)**

## **1.1 ë¡œê·¸ì¸**

**POST** `/login`

**Request**

```json
{
  "username": "admin01",
  "password": "password123"
}
```

**Response**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI...",
  "user": {
    "id": 1,
    "username": "admin01",
    "role": "admin"  // "admin" | "viewer"
  }
}
```

## **1.2 ê³„ì • ìƒì„±**

**POST** `/users`

**Request**

```json
{
  "username": "user01",
  "password": "password123",
  "role": "viewer"
}
```

-----

# ğŸ“Œ **2. ëŒ€ì‹œë³´ë“œ (Dashboard)**

## **2.1 ëŒ€ì‹œë³´ë“œ í†µí•© ë°ì´í„° ì¡°íšŒ**

**GET** `/dashboard?year=2025`

**Response**

```json
{
  "summary": {
    "year": 2025,
    "totalEmission": 8000,
    "targetEmission": 10000,
    "diffPercent": -20.0
  },
  "monthlyTrend": [
    { "month": 1, "total": 500, "target": 800, "scope1": 200, "scope3": 300, "lastYear": 450 },
    { "month": 2, "total": 600, "target": 800, "scope1": 250, "scope3": 350, "lastYear": 500 }
    // ... 12ì›”ê¹Œì§€
  ],
  "yearlyHistory": [
    { "year": 2016, "scope1": 750, "scope3": 1500 },
    // ... 2025ë…„ê¹Œì§€
  ],
  "purposePie": [
    { "name": "ì¶œí‡´ê·¼", "value": 35 },
    { "name": "ë‚©í’ˆ", "value": 25 },
    { "name": "ì¶œì¥", "value": 20 },
    { "name": "ê³µì •ìš´ì˜", "value": 15 },
    { "name": "ê¸°íƒ€", "value": 5 }
  ]
}
```

-----

# ğŸ“Œ **3. ë°°ì¶œëŸ‰ ìƒì„¸ ì¡°íšŒ (Analysis)**

*(ê¸°ê°„ë³„, ì—…ì²´ë³„, ìš´í–‰ëª©ì ë³„ ë“± ë¶„ì„ í˜ì´ì§€ ê³µí†µ ì‚¬ìš© íŒ¨í„´)*

## **3.1 ê¸°ê°„ë³„ íƒ„ì†Œ ë°°ì¶œëŸ‰ (ìº˜ë¦°ë” ì„ íƒ)**

**GET** `/emissions/period?startDate=2024-01-01&endDate=2025-01-01`

**Response**

```json
{
  "current": {
    "scope1": 15000,
    "scope3": 20000,
    "total": 35000,
    "distance": 1250000
  },
  "previous": {
    "scope1": 14000,
    "scope3": 18000,
    "total": 32000
  },
  "diffPercent": 9.4
}
```

## **3.2 ì¹´í…Œê³ ë¦¬ë³„ ë°°ì¶œëŸ‰ ì¡°íšŒ (ì°¨íŠ¸ & í…Œì´ë¸”ìš©)**

**GET** `/emissions/category?type={category}&year=2025&month=all`

  * `type`: `company`(ì—…ì²´), `purpose`(ìš´í–‰ëª©ì ), `fuel`(ì—°ë£Œ), `process`(ê³µì •), `product`(í’ˆëª©)

**Response** (ì˜ˆ: type=company)

```json
[
  {
    "id": 1,
    "name": "í˜„ëŒ€ì •ë°€",
    "totalEmission": 9429,
    "ratio": 15.5,
    "distance": 1132,
    "count": 50,          // ìš´í–‰íšŸìˆ˜ (ìš´í–‰ëª©ì , ê³µì • ë“±)
    "carCount": 5,        // ì°¨ëŸ‰ë“±ë¡ìˆ˜ (ì—…ì²´ë³„ì¼ ë•Œ)
    "avgEmission": 188,   // í‰ê· ë°°ì¶œëŸ‰
    "address": "ìš¸ì‚°ê´‘ì—­ì‹œ ë¶êµ¬", // ì£¼ì†Œ (ì—…ì²´ë³„ì¼ ë•Œ)
    "monthlyTrend": [100, 120, 90, ... ] // 1~12ì›” ë°ì´í„° (ë¼ì¸ ì°¨íŠ¸ìš©)
  },
  // ... ë¦¬ìŠ¤íŠ¸
]
```

## **3.3 ëª©í‘œ ëŒ€ë¹„ ë°°ì¶œëŸ‰ ë¹„êµ**

**GET** `/emissions/target-compare?year=2025&scope=total`

**Response**

```json
{
  "year": 2025,
  "scope": "total",
  "totalActual": 12500,
  "totalTarget": 10000,
  "diff": 2500,
  "diffPercent": 25.0,
  "isExceeded": true,
  "monthlyData": [
    { "month": 1, "actual": 600, "target": 800 },
    { "month": 2, "actual": 700, "target": 800 }
    // ...
  ]
}
```

-----

# ğŸ“Œ **4. ì €ê° í™œë™ (Reduction Activities)**

## **4.1 í™œë™ ëª©ë¡ ì¡°íšŒ**

**GET** `/activities?startDate=2025-01-01&endDate=2025-12-31`

**Response**

```json
[
  {
    "id": 1,
    "title": "ê³µíšŒì „ ì œí•œ ìº í˜ì¸",
    "startDate": "2025-11-01",
    "endDate": "2025-11-07",
    "content": "ì‚¬ë‚´ ì£¼ì°¨ì¥ ìº í˜ì¸ ì§„í–‰...",
    "cost": 1200000,
    "effect": "ì—°ë£Œ ì ˆê°",
    "imageUrl": "/uploads/activity/img_01.jpg"
  }
]
```

## **4.2 í™œë™ ë“±ë¡ (íŒŒì¼ í¬í•¨)**

**POST** `/activities`

  * **Content-Type:** `multipart/form-data`

**Request (FormData)**

  * `title`: "í•˜ì´ë¸Œë¦¬ë“œ ì°¨ëŸ‰ ë„ì…"
  * `startDate`: "2025-01-01"
  * `endDate`: "2025-12-31"
  * `content`: "ë‚´ìš©..."
  * `cost`: 45000000
  * `effect`: "íƒ„ì†Œ 30% ì €ê°"
  * `image`: (File Object)

## **4.3 í™œë™ ìˆ˜ì •**

**PUT** `/activities/{id}`

  * (FormData ì‚¬ìš©, ì´ë¯¸ì§€ ë³€ê²½ ì—†ì„ ì‹œ image í•„ë“œ ì œì™¸)

## **4.4 í™œë™ ì‚­ì œ**

**DELETE** `/activities/{id}`

-----

# ğŸ“Œ **5. ê¸°ì¤€ì •ë³´ ê´€ë¦¬ (Management)**

*(StandardDataManagementTable ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©)*

## **5.1 ì¶œì… ì°¨ëŸ‰ ê´€ë¦¬**

  * **ì¡°íšŒ:** **GET** `/management/vehicles`
  * **ë“±ë¡:** **POST** `/management/vehicles`
  * **ìˆ˜ì •:** **PUT** `/management/vehicles/{id}`
  * **ì‚­ì œ:** **DELETE** `/management/vehicles/{id}`
  * **ì¼ê´„ ì‚­ì œ:** **POST** `/management/vehicles/batch-delete` (Body: `{"ids": [1, 2, 3]}`)

**Vehicle Data Structure**

```json
{
  "id": 1,
  "carNumber": "12ê°€3456",
  "purpose": "ì¶œí‡´ê·¼",
  "scope": "Scope1",
  "vendorName": "í˜„ëŒ€ì •ë°€",
  "employeeId": "30",
  "distance": "4.7",
  "categoryLarge": "ìŠ¹ìš©ì°¨",
  "categorySmall": "ì¤‘í˜•",
  "carModel": "ì˜ë‚˜íƒ€",
  "fuelType": "íœ˜ë°œìœ ",
  "note": "ë¹„ê³ "
}
```

## **5.2 ì—…ì²´ëª… ë° ì£¼ì†Œì§€ ê´€ë¦¬**

  * **URL:** `/management/companies` (GET, POST, PUT, DELETE)

**Company Data Structure**

```json
{
  "id": 1,
  "vendorName": "í˜‘ë ¥ì—…ì²´A",
  "processName": "ë„ì¥",
  "distance": "12.5",
  "productClass": "1000",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬...",
  "note": "ë¹„ê³ "
}
```

## **5.3 ì°¨ì¢… ë° ì—°ë¹„ ê´€ë¦¬**

  * **URL:** `/management/car-models`

**CarModel Data Structure**

```json
{
  "id": 1,
  "categoryLarge": "ìŠ¹ìš©ì°¨",
  "categorySmall": "ì¤‘í˜•",
  "fuelType": "íœ˜ë°œìœ ",
  "fuelEfficiency": "12.5"
}
```

## **5.4 ìƒì‚° ê³µì • ê´€ë¦¬**

  * **URL:** `/management/processes`

**Process Data Structure**

```json
{ "id": 1, "processName": "í”„ë ˆìŠ¤" }
```

## **5.5 ìš´í–‰ ëª©ì  ê´€ë¦¬**

  * **URL:** `/management/purposes`

**Purpose Data Structure**

```json
{ "id": 1, "purpose": "ë‚©í’ˆ", "scope": "Scope3" }
```

## **5.6 ìƒì‚° í’ˆëª© êµ¬ë¶„ ê´€ë¦¬**

  * **URL:** `/management/products`

**Product Data Structure**

```json
{ "id": 1, "productClass": "1000", "note": "ì„¤ëª…" }
```

-----

# ğŸ“Œ **6. ë°ì´í„° ì—…ë¡œë“œ (Excel Upload)**

## **6.1 ë‚˜ì´ìŠ¤íŒŒí¬ ë°ì´í„° ì—…ë¡œë“œ**

**POST** `/upload/nicepark`

  * **Content-Type:** `multipart/form-data`
  * **Body:** `file` (Excel File)

## **6.2 ì—ìŠ¤ì› ë°ì´í„° ì—…ë¡œë“œ**

**POST** `/upload/s1`

  * **Content-Type:** `multipart/form-data`
  * **Body:** `file` (Excel File)

## **6.3 ì—…ë¡œë“œ ì´ë ¥/ë°ì´í„° ì¡°íšŒ (ë¯¸ë¦¬ë³´ê¸°ìš©)**

**GET** `/upload/history?year=2025&month=7`

**Response**

```json
{
  "nicePark": [
    { "carNumber": "12ê°€3456", "entryDate": "2025-07-01", "entryTime": "14:00" }
  ],
  "s1": [
    { "workDate": "2025-07-01", "employeeId": "1001" }
  ]
}
```

## **6.4 ì—…ë¡œë“œ ë°ì´í„° í™•ì • (DB ì €ì¥)**

**POST** `/upload/confirm`

  * **Body:**

<!-- end list -->

```json
{
  "year": "2025",
  "month": "7",
  "dataTypes": ["nicepark", "s1"] 
}
```

-----

# ğŸ“Œ **7. ê³µí†µ ì˜µì…˜ ì¡°íšŒ (Dropdown Options)**

*(í”„ë¡ íŠ¸ì—”ë“œ í•˜ë“œì½”ë”© ëŒ€ì‹  DBì—ì„œ ê´€ë¦¬í•  ê²½ìš°)*

**GET** `/options`

**Response**

```json
{
  "purposes": ["ë‚©í’ˆ", "ì¶œí‡´ê·¼", "ê³ ê°", "ê¸°íƒ€"],
  "fuelTypes": ["íœ˜ë°œìœ ", "ê²½ìœ ", "LPG", "ì „ê¸°", "ìˆ˜ì†Œ"],
  "carCategories": {
    "large": ["ìŠ¹ìš©ì°¨", "ìƒìš©íŠ¸ëŸ­"],
    "small": ["ëŒ€í˜•", "ì¤‘í˜•", "ì†Œí˜•", "ê²½ì°¨"]
  },
  "processes": ["í”„ë ˆìŠ¤", "ì°¨ì²´", "ë„ì¥", "ì¡°ë¦½"],
  "productClasses": ["1000", "2000", "3000"]
}
```